<ml-s><span lang="en">How I added multiple languages to my blog</span><span lang="ja">ç§ã®ãƒ–ãƒ­ã‚°ã«ä»–ã®è¨€èªã‚’ä»˜ã‘åŠ ãˆæ–¹</span></ml-s>
<ml-s><span lang="en">Week 10 progress roundup: Duolingo and wack</span><span lang="ja">ï¼™é€±ç›®ã®é€²æ­©ï¼šDuolingoã‚’ä½œã£ãŸã—ã€ã°ã‹ãªã‚‚ã®ã‚‚ã‚’ã—ãŸ</span></ml-s>
blog/how-I-added-multiple-languages-to-my-blog/thumb.png
Duolingoã ã‘, programming ok: gears and arrows
2024-07-13-00-45-30


<ml-s><h1 lang="en">How I added multiple languages to my blog</h1><h1 lang="ja">ç§ã®ãƒ–ãƒ­ã‚°ã«ä»–ã®è¨€èªã‚’ä»˜ã‘åŠ ãˆæ–¹</h1></ml-s>
<ml-s>
    <p lang="en">I like to study other languages, currently Japanese. So when I was talking to Hayden about improving our blogs, I decided I would just make it multilingual for fun. Now, at the bottom of the page, there are buttons to switch the language instantly:</p>
    <p lang="ja">ä»–ã®è¨€èªã‚’å‹‰å¼·ã™ã‚‹ã®ãŒå¥½ãã§ã™ã€‚ä»Šã€æ—¥æœ¬èªã‚’å‹‰å¼·ã™ã‚‹ã€‚ã ã‹ã‚‰ã€Haydenã¨ç§é”ã®ãƒ–ãƒ­ã‚°ã‚’ç£¨ã‘æ–¹ã«ã¤ã„ã¦è©±ã™ã¨ãã«ã€ç§ã¯æ¥½ã—ã¿ã«ä»–ã®è¨€èªã‚’ä»˜ã‘åŠ ãˆã‚‹ã“ã¨ã«æ±ºã‚ãŸã€‚ä»Šã€ãƒ•ãƒƒã‚¿ãƒ¼ã«è¨€èªã‚’å¤‰ãˆã‚‹ã®ãƒœãƒˆãƒ³ãŒã‚ã‚‹ï¼š</p>
</ml-s> 
<ml-s>
    <figure lang="en">
        <img src="/blog/how-I-added-multiple-languages-to-my-blog/language-switcher.png">
        <figcaption>"Switch Language: [English] [æ—¥æœ¬èª]"</figcaption>
    </figure>
    <figure lang="ja">
        <img src="/blog/how-I-added-multiple-languages-to-my-blog/language-switcher.ja.png">
        <figcaption>"è¨€èªã‚’å¤‰ãˆã‚‹: [English] [æ—¥æœ¬èª]"</figcaption>
    </figure>
</ml-s>
<ml-s>
    <p lang="en">I'm not fluent in Japanese yet, so there will probably be mistakes.</p>
    <p lang="ja">ã¾ã æ—¥æœ¬èªãŒãƒšãƒ©ãƒšãƒ©ã˜ã‚ƒãªã„ã®ã§ã€å¤šåˆ†é–“é•ã„ãŒã‚ã‚‹ã€‚</p>
</ml-s>
<ml-s>
    <p lang="en">I saw a bunch of Stack Overflow posts that said that the only acceptable way to support multiple languages on a website is to send a different version of a page server-side depending on the user's preferred language. It is said that this reduces the amount of data the user has to download, and I agree. However, doing that would require me to increase the complexity of this site by something like 20 times. So, I don't want to.</p>
    <p lang="ja">Stack Overflowã§ãŸãã•ã‚“ã®ã€Œã§ãã‚‹ã ã‘å°‘ãªã„ãƒ‡ãƒ¼ã‚¿ã‚’é€ã‚‹ã®ãŸã‚ã‹ã‚‰ã€ã‚µã‚¤ãƒˆã«ä»–ã®è¨€èªã‚’ä¸€ã¤ã®ä»˜ã‘åŠ ãˆæ–¹ã¯ãŠå®¢ã•ã‚“ã®è¨€èªã§ã‚µãƒ¼ãƒãƒ¼ãŒä»–ã®ãƒšãƒ¼ã‚¸ã‚’é€ã‚‹å¿…è¦ã€ã¨è¨€ã†ãƒã‚¹ãƒˆã‚’è¦‹ãŸã€‚ãã‚“ãªå¤‰åŒ–ã¯ç§ã®ã‚µã‚¤ãƒˆã‚’ï¼’ï¼å€è¤‡é›‘ã«ãªã‚‹ã®ã§ã€ãã‚“ãªå¤‰åŒ–ã‚’ã—ãŸããªã„ã€‚</p>
</ml-s>
<ml-s>
    <p lang="en">I love web components because they basically just add features to HTML, which is like 99% of what I want web frameworks like React to do. So, I created a web component with the tag name "ml-s" in 77 lines of code. Each of its children have a "lang" attribute to indicate the language of its contents. Depending on the user's browser-defined preferred languages and the override buttons in the footer, it chooses which of its children is the best and replaces itself with the best child and backs up the children. If the language preferences change, it replaces again based on the backed-up children.</p>
    <p lang="ja">ã‚¦ã‚§ãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå¤§å¥½ãã®ã§ã€ã€Œml-sã€ã¨è¨€ã†ã‚¦ã‚§ãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œã£ãŸã€‚ã€Œlangã€ã¨è¨€ã†ã—ml-sã®å­è¦ç´ ã«ã¤ã‘ã‚‹å±æ€§ã¯å­è¦ç´ ã®è¨€èªã‚’æ±ºã‚ã‚‹ã€‚ãŠå®¢ã•ã‚“ã®è¨€èªã§ml-sã¯æœ€é«˜ã®å­è¦ç´ ã‚’ã—ã¦ã€æœ€é«˜ã®å­è¦ç´ ã¨ml-sã‚’å–ã‚Šæ›¿ãˆã¦ã€å­è¦ç´ ã‚’ä¿å…¨ã™ã‚‹ã€‚ãŠå®¢ã•ã‚“ã®è¨€èªãŒå¤‰ãˆã‚‹ã¨ã€ä¿å…¨ã—ãŸå­è¦ç´ ã¨ãƒšãƒ¼ã‚¸ã«ã‚ã‚‹å­è¦ç´ ã‚’å–ã‚Šæ›¿ãˆã‚‹ã€‚</p>
</ml-s>
<figure>
    <textarea readonly rows=5 style="width: 100%"><ml-s>
    <h1 lang="en">How I added multiple languages to my blog</h1>
    <h1 lang="ja">ç§ã®ãƒ–ãƒ­ã‚°ã«ä»–ã®è¨€èªã‚’ä»˜ã‘åŠ ãˆæ–¹</h1>
</ml-s></textarea>
    <ml-s>
        <figcaption lang="en">The HTML for this page's header</figcaption>
        <figcaption lang="ja">ã“ã®ãƒšãƒ¼ã‚¸ã®è¦‹å‡ºã—è¦ç´ ã®HTML</figcaption>
    </ml-s>
</figure>
<ml-s>
    <p lang="en">I love this solution because it's super simple and effective for normal viewing. For RSS, it's a little more complicated. Luckily, HTML is structured data, so for the different English/Japanese RSS feeds, I just parse the HTML page, title, and description using <a href="https://aantron.github.io/lambdasoup/" target="_BLANK">Lambda Soup</a>, extract the language from each ml-s element, convert it back into HTML text.</p>
    <p lang="ja">ãƒšãƒ¼ã‚¸ã«è¦‹ã‚‹ã“ã¨ãŒã¨ã¦ã‚‚å˜ç´”ã§æœ‰åŠ¹ã®ã§ã“ã®ç³»çµ±ãŒå¤§å¥½ãã€‚RSSã«è¦‹ã‚‹ã“ã¨ãŒã‚‚ã£ã¨è¤‡é›‘ã ã‘ã©HTMLã¯ãƒ‡ãƒ¼ã‚¿ã ã‹ã‚‰ã»ã—ã„è¨€èªã‚’æŠœãå‡ºã—ã«<a href="https://aantron.github.io/lambdasoup/" target="_BLANK">Lambda Soup</a>ã‚’ä½¿ãˆã‚‹ã€‚</p>
</ml-s>
<ml-s>
    <p lang="en">It's also a little complicated for the page title since HTML can only have text in the title, no HTML tags. So, I use a hidden element at the top of the body and everytime it changes, it updates the title with the text representation of itself. Still less complicated than <a href="https://dev.to/rohitnirban/adding-page-titles-to-react-app-23oe" target="_BLANK">React</a> ğŸ¤­.</p>
    <p lang="ja">æ–‡æ›¸é¡Œåã‚‚ã‚‚ã£ã¨è¤‡é›‘ã€æ–‡æ›¸é¡Œåè¦ç´ ã«HTMLãŒã‚ã‚‹ã®ãŒã§ããªã„ã‹ã‚‰ã€‚ãã‚Œã«ã€æ–‡æ›¸æœ¬ä½“è¦ç´ ã«è¦‹ãˆãªã„è¦ç´ ã‚’ä»˜ã‘åŠ ãˆã¦ã€ãã®è¦‹ãˆãªã„è¦ç´ ã‹ã‚‰å­—ã‚’æŠœãå‡ºã™ã€‚ãã®è¦‹ãˆãªã„è¦ç´ ãŒå¤‰ã‚ã‚‹ã¨ã€ã¾ãŸå­—ã‚’æŠœãå‡ºã™ã€‚ã¾ã Reactã‚ˆã‚Šç°¡å˜ã ã¨æ€ã†wã€‚</p>
</ml-s>
<ml-s>
    <p lang="en">Thank you for reading, I hope the simplicity inspires you as it does me.</p>
    <p lang="ja">èª­ã‚“ã§ãã‚Œã¦ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼</p>
</ml-s>
<a href="/blog/how-I-added-multiple-languages-to-my-blog/multilingual.js" target="_BLANK"><ml-s><span lang="en">a copy of the current relevant code</span><span lang="ja">ã‚³ãƒ¼ãƒ‰ã®ã‚³ãƒ”ãƒ¼</span></ml-s></a>

